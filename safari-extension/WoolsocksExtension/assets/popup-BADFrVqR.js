import{r as p,j as e,c as W}from"./client-CwqcFquV.js";import{i as B,t as c}from"./i18n-ChiNe6Ig.js";import{t as U}from"./analytics-B6nZXsGu.js";async function _(){const n=await chrome.storage.local.get("wsAnonId");if(n?.wsAnonId)return n.wsAnonId;const m=crypto.randomUUID();return await chrome.storage.local.set({wsAnonId:m}),m}async function D(){try{const n=await _(),m=await fetch("https://woolsocks.eu/api/wsProxy/user-info/api/v0",{credentials:"include",headers:{"x-application-name":"WOOLSOCKS_WEB","x-user-id":n}});return m.ok?await m.json():null}catch{return null}}async function O(){try{const n=await _(),f=await fetch("https://woolsocks.eu/api/wsProxy/wallets/api/v0/transactions?excludeAutoRewards=false&direction=forward&limit=20&supportsJsonNote=true",{credentials:"include",headers:{"x-application-name":"WOOLSOCKS_WEB","x-user-id":n}});if(!f.ok)return[];const h=await f.json();try{console.debug("[WS] transactions raw",h)}catch{}let l=[];Array.isArray(h?.data?.transactions)?l=h.data.transactions:Array.isArray(h?.transactions)?l=h.transactions:Array.isArray(h?.data)?l=h.data:Array.isArray(h)?l=h:h?.data?.transactions?.data&&Array.isArray(h.data.transactions.data)&&(l=h.data.transactions.data);const k=l.map(i=>{const y=i?.merchant||i?.merchantInfo||{},x=y?.logoUrl||y?.logoURI||y?.logoUri||y?.logo||void 0,j=i?.createdAt||i?.created_at||i?.date||i?.eventDate,F=i?.recordState||i?.recordstate||i?.status||i?.state,b=typeof i?.amount=="number"?i.amount:typeof i?.amount?.amount=="number"?i.amount.amount:typeof i?.amount?.value=="number"?i.amount.value:typeof i?.amountCents=="number"?i.amountCents/100:void 0,w=typeof b=="number"?b:0;return{id:i?.id||`${y?.name||"txn"}-${j||Math.random()}`,amount:w,currency:i?.currencyCode||i?.currency||"EUR",merchantName:y?.name||"Unknown",logo:x,state:F||"unknown",recordType:i?.recordType||i?.type||"Unknown",createdAt:j||new Date().toISOString()}});return k.sort((i,y)=>new Date(y.createdAt).getTime()-new Date(i.createdAt).getTime()),k.slice(0,5)}catch{return[]}}function L({variant:n="options",onBalance:m}){const[f,h]=p.useState(null),[l,k]=p.useState(null),[i,y]=p.useState([]),[x,j]=p.useState(!1),[F,b]=p.useState(!0);p.useEffect(()=>{try{B()}catch{}w().then(t=>{h(t),t&&(C(),v(),E(),R())})},[]);async function w(){try{const t=await chrome.cookies.getAll({domain:"woolsocks.eu"}),u=await chrome.cookies.getAll({domain:"api.woolsocks.eu"});return[...t,...u].some(I=>I.name==="ws-session"||/session/i.test(I.name))}catch{return!1}}async function C(){const t=await D();k(t)}async function v(){const t=await O();y(t)}async function E(){const u=(await chrome.storage.local.get("user")).user||{settings:{}};j(!!u.settings?.qaBypassVoucherDismissal)}async function R(){const r=((await chrome.storage.local.get("user")).user||{settings:{}}).settings?.autoActivateOnlineCashback;b(r!==!1)}async function S(t){const r=(await chrome.storage.local.get("user")).user||{totalEarnings:0,activationHistory:[],settings:{showCashbackPrompt:!0,showVoucherPrompt:!0}};r.settings=r.settings||{showCashbackPrompt:!0,showVoucherPrompt:!0},r.settings.qaBypassVoucherDismissal=t,await chrome.storage.local.set({user:r}),j(t)}async function A(t){const r=(await chrome.storage.local.get("user")).user||{totalEarnings:0,activationHistory:[],settings:{showCashbackPrompt:!0,showVoucherPrompt:!0,autoActivateOnlineCashback:!0}};r.settings=r.settings||{showCashbackPrompt:!0,showVoucherPrompt:!0,autoActivateOnlineCashback:!0},r.settings.autoActivateOnlineCashback=t,await chrome.storage.local.set({user:r}),b(t)}const s=l?.data?.firstName||l?.firstName||l?.user?.firstName,o=l?.data?.email||l?.email||l?.user?.email||l?.profile?.email,a=!!o&&/@(woolsocks\.eu|apcreation\.nl)$/i.test(o),g=l?.data?.sockValue??l?.data?.cashback?.sockValue??l?.data?.cashbackSock??l?.data?.balance??l?.sockValue??l?.balance,d=typeof g=="number"?g:0;return p.useEffect(()=>{try{m&&m(d)}catch{}},[d]),p.useEffect(()=>{l&&!a&&x&&S(!1)},[l,a,x]),e.jsxs("div",{style:{width:n==="popup"?"100%":320,padding:n==="popup"?0:16,borderRadius:n==="popup"?0:12,background:n==="popup"?"transparent":"#fff",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[f===null&&e.jsx("div",{style:{marginTop:24,fontSize:13,color:"#666"},children:c("options.checkingSession")}),f===!1&&e.jsxs("div",{style:{marginTop:24},children:[e.jsx("div",{style:{fontSize:14,marginBottom:12},children:c("options.noActiveSession")}),e.jsx("button",{onClick:()=>chrome.tabs.create({url:"https://woolsocks.eu/nl/profile",active:!0}),style:{background:"#211940",color:"white",border:"none",borderRadius:6,padding:"10px 14px",fontSize:13,cursor:"pointer"},children:c("options.loginAtWs")})]}),f===!0&&e.jsxs("div",{style:{marginTop:n==="popup"?8:24},children:[a&&n!=="popup"&&e.jsx("div",{style:{background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:8,padding:12,marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600},children:c("options.qaBypassTitle")}),e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:t=>S(t.target.checked)}),e.jsx("span",{style:{fontSize:12,color:"#6B7280"},children:x?c("options.enabled"):c("options.disabled")})]})]})}),n!=="popup"&&e.jsx("div",{style:{background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:8,padding:12,marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600},children:c("options.autoActivateOnlineCashback")}),e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:F,onChange:t=>A(t.target.checked)}),e.jsx("span",{style:{fontSize:12,color:"#6B7280"},children:F?c("options.enabled"):c("options.disabled")})]})]})}),n==="popup"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:4,padding:"8px 10px",background:"rgba(0,0,0,0.05)",borderRadius:8,margin:"0 auto",width:"fit-content"},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M14.1755 4.22225C14.1766 2.99445 11.6731 2 8.58832 2C5.50357 2 3.00224 2.99557 3 4.22225M3 4.22225C3 5.45004 5.50133 6.44449 8.58832 6.44449C11.6753 6.44449 14.1766 5.45004 14.1766 4.22225L14.1766 12.8445M3 4.22225V17.5556C3.00112 18.7834 5.50245 19.7779 8.58832 19.7779C10.0849 19.7779 11.4361 19.5412 12.4387 19.1601M3.00112 8.66672C3.00112 9.89451 5.50245 10.889 8.58944 10.889C11.6764 10.889 14.1778 9.89451 14.1778 8.66672M12.5057 14.6946C11.4976 15.0891 10.115 15.3335 8.58832 15.3335C5.50245 15.3335 3.00112 14.3391 3.00112 13.1113M20.5272 13.4646C22.4909 15.4169 22.4909 18.5836 20.5272 20.5358C18.5635 22.4881 15.3781 22.4881 13.4144 20.5358C11.4507 18.5836 11.4507 15.4169 13.4144 13.4646C15.3781 11.5124 18.5635 11.5124 20.5272 13.4646Z",stroke:"#0F0B1C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("span",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:14,fontWeight:700,color:"#100B1C",lineHeight:1.45,letterSpacing:"0.1px"},children:["€",d.toFixed(2)]})]}),e.jsx("div",{style:{textAlign:"center",marginTop:15,fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:14,color:"#100B1C",opacity:.5,lineHeight:1.45,letterSpacing:"0.1px"},children:c("options.recentTransactions")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:16,fontWeight:600},children:c("options.greeting",{name:s||"there"})}),e.jsx("div",{style:{marginTop:8,fontSize:14,color:"#444"},children:c("options.cashbackSock")}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#000000"},children:["€",d.toFixed(2)]})]}),e.jsxs("div",{style:{marginTop:n==="popup"?15:24},children:[n!=="popup"&&e.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:8},children:c("options.recentTransactions")}),i.length===0&&e.jsx("div",{style:{fontSize:12,color:"#666"},children:c("options.noRecentTransactions")}),e.jsx("div",{style:{background:n==="popup"?"#F5F5F6":"transparent",borderRadius:n==="popup"?16:0,padding:"0"},children:e.jsxs("div",{style:{background:n==="popup"?"#FFFFFF":"transparent",borderRadius:n==="popup"?"16px 16px 16px 16px":0,padding:n==="popup"?"16px 0":"0"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:i.map(t=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:n==="popup"?"8px 16px":"12px 0"},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:4,overflow:"hidden",background:"#FFFFFF",border:"0.5px solid #ECEBED",display:"flex",alignItems:"center",justifyContent:"center"},children:t.logo?e.jsx("img",{src:t.logo,alt:t.merchantName,style:{width:36,height:36,objectFit:"contain"}}):e.jsx("div",{style:{fontSize:12,color:"#999"},children:t.merchantName?.[0]||"?"})}),e.jsxs("div",{style:{flex:1,marginLeft:8,display:"flex",flexDirection:"column",gap:4},children:[e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",color:"#100B1C",lineHeight:1.45,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.recordType==="Expense"?c("options.payoutToIban"):t.merchantName}),e.jsx("div",{style:{fontSize:12,fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",color:"#100B1C",opacity:.5,lineHeight:1.4},children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",gap:4},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:600,fontFamily:"Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",color:"#100B1C",lineHeight:1.45,whiteSpace:"nowrap"},children:["€",t.amount.toFixed(2)]}),e.jsx("div",{style:{fontSize:12,fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",color:"#100B1C",opacity:.5,lineHeight:1.4,whiteSpace:"nowrap"},children:t.state||c("options.pending")})]})]},t.id))}),e.jsx("div",{style:{marginTop:8,textAlign:"center",padding:n==="popup"?"0 16px":"0"},children:e.jsx("button",{onClick:()=>chrome.tabs.create({url:"https://woolsocks.eu/nl-NL/profile",active:!0}),style:{background:"transparent",color:"#0084FF",fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:14,fontStyle:"normal",fontWeight:500,lineHeight:"130%",border:"none",padding:0,cursor:"pointer"},children:c("options.viewAllTransactions")})})]})})]}),n==="popup"&&e.jsx("div",{style:{textAlign:"center",marginTop:15},children:e.jsx("img",{src:chrome.runtime.getURL("public/icons/Woolsocks-logo-large.svg"),alt:"Woolsocks",style:{height:33,width:140}})})]})]})}function T(){const[n,m]=p.useState(null),[f,h]=p.useState("home"),[l,k]=p.useState(0),[i,y]=p.useState([]),[x,j]=p.useState([]),[F,b]=p.useState(!1),[w,C]=p.useState(!0),[v,E]=p.useState("");p.useEffect(()=>{try{B()}catch{}document.documentElement.style.margin="0",document.documentElement.style.background="transparent",document.body.style.margin="0",document.body.style.background="transparent",(async()=>{try{const o=await chrome.runtime.sendMessage({type:"CHECK_ACTIVE_SESSION"});if(o&&typeof o.active=="boolean"){m(o.active);return}}catch{}try{const o=await chrome.cookies.getAll({domain:"woolsocks.eu"}),a=await chrome.cookies.getAll({domain:"api.woolsocks.eu"}),d=[...o,...a].some(t=>t.name==="ws-session"||/session/i.test(String(t?.name||"")));m(d)}catch{m(!1)}})(),(async()=>{try{const{__wsOcPopupData:o}=await chrome.storage.local.get("__wsOcPopupData");if(o){const a=document.getElementById("__ws_oc_enabled");a&&(a.style.display="block");const g=document.getElementById("__ws_oc_title"),d=document.getElementById("__ws_oc_rate"),t=document.getElementById("__ws_oc_btn"),u=document.getElementById("__ws_oc_cond");if(g&&(g.textContent=`${o.partnerName}`),d&&((o.amountType||"PERCENTAGE")==="PERCENTAGE"?d.textContent=`${o.rate}% cashback`:d.textContent=`€${Number(o.rate||0).toFixed(2)} cashback`),u){const r=o?.conditions?.termsCondition,I=o?.conditions?.additionalInfo;u.textContent=r||I||""}t&&(t.onclick=()=>{const r=o?.affiliateUrl;r&&(U("oc_manual_reactivate",{domain:o?.domain,partner_name:o?.partnerName,deal_id:o?.dealId,click_id:o?.clickId}),chrome.tabs.create({url:r}))})}}catch{}})();const s=o=>{try{o&&o.type==="SESSION_UPDATED"&&o.active===!0&&m(!0)}catch{}};try{chrome.runtime.onMessage.addListener(s)}catch{}return()=>{try{chrome.runtime.onMessage.removeListener(s)}catch{}}},[]);const R=()=>{chrome.tabs.create({url:"https://woolsocks.eu/nl/profile",active:!0})};p.useEffect(()=>{if(n!==!0){(async()=>{try{const s=await chrome.runtime.sendMessage({type:"CHECK_ACTIVE_SESSION"});s&&s.active&&m(!0)}catch{}})();return}(async()=>{try{const s=await chrome.storage.local.get("wsAnonId"),o=s?.wsAnonId||crypto.randomUUID();s?.wsAnonId||await chrome.storage.local.set({wsAnonId:o});const a=await fetch("https://woolsocks.eu/api/wsProxy/user-info/api/v0",{credentials:"include",headers:{"x-application-name":"WOOLSOCKS_WEB","x-user-id":o}});if(!a.ok)return;const g=await a.json(),d=g?.data?.sockValue??g?.data?.cashback?.sockValue??g?.data?.cashbackSock??g?.data?.balance??g?.sockValue??g?.balance,t=typeof d=="number"?d:0;k(t);const u=document.getElementById("__ws_balance");u&&(u.textContent=`€${t.toFixed(2)}`)}catch{}})()},[n]),p.useEffect(()=>{n===!0&&(async()=>{try{const a=((await chrome.storage.local.get("user")).user||{settings:{}}).settings?.autoActivateOnlineCashback;C(a!==!1)}catch{}})()},[n]);async function S(s){try{const a=(await chrome.storage.local.get("user")).user||{totalEarnings:0,activationHistory:[],settings:{showCashbackPrompt:!0,showVoucherPrompt:!0,autoActivateOnlineCashback:!0}};a.settings=a.settings||{showCashbackPrompt:!0,showVoucherPrompt:!0,autoActivateOnlineCashback:!0},a.settings.autoActivateOnlineCashback=s,await chrome.storage.local.set({user:a}),C(s)}catch{}}if(p.useEffect(()=>{n===!0&&(async()=>{try{const[s]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!s?.url)return;const a=new URL(s.url).hostname;E(a.replace(/^www\./,""));try{const d=await chrome.storage.local.get("__wsOcPopupData");if(d.__wsOcPopupData){const t=d.__wsOcPopupData,u=t.domain===a||a.endsWith(`.${t.domain}`)||t.domain.endsWith(`.${a}`),r=t.timestamp&&Date.now()-t.timestamp<3600*1e3;u&&r&&b(!0)}}catch{}try{const d=await chrome.runtime.sendMessage({type:"REQUEST_ACTIVATION_STATE",domain:a});d&&d.active&&b(!0)}catch{}const g=await chrome.runtime.sendMessage({type:"CHECK_MERCHANT_SUPPORT",hostname:a});if(g?.supported&&g?.partner){const d=g.partner,t=d.categories?.find(r=>/online\s*cashback/i.test(r.name||"")||r.name==="Online cashback");t?.deals&&y(t.deals.slice(0,2));const u=d.categories?.find(r=>/voucher/i.test(r.name||"")||r.name==="Vouchers");u?.deals&&u.deals.length>0&&j(u.deals.slice(0,3))}}catch(s){console.error("Failed to load deals:",s)}})()},[n]),n===null)return e.jsx("div",{style:{background:"#FDC408",padding:16,borderRadius:0,overflow:"hidden",position:"relative",width:320},children:e.jsx("div",{style:{fontSize:13,color:"#111827",opacity:.7},children:c("popup.checkingSession")})});const A=F?"#00C275":"#FDC408";return e.jsxs("div",{style:{background:A,borderRadius:0,overflow:"hidden",position:"relative",width:310,maxHeight:600,display:"flex",flexDirection:"column",border:`4px solid ${A}`},children:[e.jsx("div",{style:{padding:f==="transactions"?"16px 0 0 0":"8px 0 0 0",display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:8,paddingRight:8},children:f==="transactions"?e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>h("home"),"aria-label":"Back",style:{appearance:"none",background:"transparent",border:"none",cursor:"pointer",lineHeight:1,padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.41421 13.0001L10.7071 17.293L9.29289 18.7072L3.29289 12.7072C2.90237 12.3167 2.90237 11.6835 3.29289 11.293L9.29289 5.29297L10.7071 6.70718L6.41421 11.0001H20V13.0001H6.41421Z",fill:"#0F0B1C"})})})}):n===!0?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>h("transactions"),style:{background:"rgba(0,0,0,0.05)",color:"#100B1C",padding:"6px 10px",borderRadius:8,fontWeight:500,display:"inline-flex",alignItems:"center",gap:4,border:"none",cursor:"pointer",fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:14},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M14.1755 4.22225C14.1766 2.99445 11.6731 2 8.58832 2C5.50357 2 3.00224 2.99557 3 4.22225M3 4.22225C3 5.45004 5.50133 6.44449 8.58832 6.44449C11.6753 6.44449 14.1766 5.45004 14.1766 4.22225L14.1766 12.8445M3 4.22225V17.5556C3.00112 18.7834 5.50245 19.7779 8.58832 19.7779C10.0849 19.7779 11.4361 19.5412 12.4387 19.1601M3.00112 8.66672C3.00112 9.89451 5.50245 10.889 8.58944 10.889C11.6764 10.889 14.1778 9.89451 14.1778 8.66672M12.5057 14.6946C11.4976 15.0891 10.115 15.3335 8.58832 15.3335C5.50245 15.3335 3.00112 14.3391 3.00112 13.1113M20.5272 13.4646C22.4909 15.4169 22.4909 18.5836 20.5272 20.5358C18.5635 22.4881 15.3781 22.4881 13.4144 20.5358C11.4507 18.5836 11.4507 15.4169 13.4144 13.4646Z",stroke:"#0F0B1C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("span",{id:"__ws_balance",children:["€",l.toFixed(2)]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",marginLeft:"auto"},children:v&&e.jsx("span",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:12,color:"#100B1C",opacity:.6,lineHeight:1.4},children:v})})]}):e.jsx("button",{onClick:R,style:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,padding:"0 12px",background:"#211940",color:"#FFFFFF",border:"none",borderRadius:4,cursor:"pointer",fontFamily:'Woolsocks, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSize:14,fontWeight:500,lineHeight:1.4},children:c("popup.login")})}),f==="transactions"?n===!0?e.jsx("div",{style:{flex:1,overflowY:"auto"},children:e.jsx(L,{variant:"popup",onBalance:s=>{try{k(s);const o=document.getElementById("__ws_balance");o&&(o.textContent=`€${s.toFixed(2)}`)}catch{}}})}):null:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,flex:1,overflowY:"auto"},children:[i.length>0&&e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:x.length>0?"16px 16px 0 0":16,padding:"8px 0 16px 0",display:"flex",flexDirection:"column",gap:12,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[e.jsx("img",{src:chrome.runtime.getURL("public/icons/online cashback deals.png"),alt:"Online cashback",style:{width:18,height:18}}),e.jsx("span",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:12,color:"#100B1C",opacity:.5,letterSpacing:"0.15px"},children:c("popup.onlineCashback")})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,padding:"0 16px"},children:i.map((s,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"2px 0"},children:[e.jsx("div",{style:{background:"rgba(253,196,8,0.2)",borderRadius:8,width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("span",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:12,fontWeight:500,color:"#100B1C",letterSpacing:"0.1px"},children:s.amountType==="FIXED"?`€${s.rate}`:`${s.rate}%`})}),e.jsx("div",{style:{flex:1,fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:12,color:"#100B1C",lineHeight:1.45,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.description||s.name})]},o))}),e.jsx("div",{style:{padding:"0 16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:13,fontWeight:600,color:"#100B1C"},children:c("popup.autoActivation")}),e.jsx("label",{style:{cursor:"pointer",userSelect:"none"},children:e.jsxs("div",{style:{position:"relative",width:51,height:31,background:w?"#FDC408":"#E5E7EB",borderRadius:15.5,transition:"background 0.2s",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:w,onChange:s=>S(s.target.checked),style:{position:"absolute",opacity:0,width:0,height:0}}),e.jsx("div",{style:{position:"absolute",top:2,left:w?22:2,width:27,height:27,background:"#FFFFFF",borderRadius:"50%",transition:"left 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:w&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27",viewBox:"0 0 27 27",fill:"none",style:{display:"block"},children:e.jsx("path",{d:"M7 13.5L11.5 18L20 9.5",stroke:"#FDC408",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})]})}),F&&e.jsx("div",{style:{padding:"8px 16px 0 16px"},children:e.jsxs("div",{style:{background:"#ECFDF5",borderRadius:8,padding:"8px 0",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",fill:"#268E60"})}),e.jsx("span",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:16,color:"#268E60"},children:c("popup.trackingActive")})]})})]}),x.length>0&&e.jsxs("div",{style:{background:"#FFFFFF",borderRadius:i.length>0?"0 0 16px 16px":16,padding:"8px 0",display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[e.jsx("img",{src:chrome.runtime.getURL("public/icons/voucher deals.png"),alt:"Vouchers",style:{width:18,height:18}}),e.jsx("span",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:12,color:"#100B1C",opacity:.5,letterSpacing:"0.15px"},children:c("popup.payWithVouchers")})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:0},children:x.map((s,o)=>e.jsxs("div",{onClick:()=>{s.dealUrl&&chrome.tabs.create({url:s.dealUrl,active:!0})},style:{background:"#FFFFFF",display:"flex",alignItems:"center",gap:16,padding:"8px 16px",cursor:s.dealUrl?"pointer":"default",borderRadius:8},children:[e.jsx("div",{style:{width:69,height:46,borderRadius:8,border:"2px solid #F5F5F6",overflow:"hidden",flexShrink:0,background:"#FFFFFF"},children:s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name||"Voucher",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:"100%",background:"#F5F5F6"}})}),e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{flex:1,fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:12,fontWeight:500,color:"#100B1C",lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.name||"Gift Card"}),s.rate&&e.jsx("div",{style:{background:"#8564FF",border:"2px solid #F5F5F6",borderRadius:1278,padding:"0 8px",height:24,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("span",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:12,fontWeight:500,color:"#FFFFFF",letterSpacing:"0.15px"},children:[s.rate,"%"]})})]})]},o))})]}),i.length===0&&x.length===0&&e.jsx("div",{style:{background:"#FFFFFF",borderRadius:16,padding:"16px",display:"flex",flexDirection:"column",gap:8,marginTop:8},children:e.jsx("div",{style:{textAlign:"center",padding:"8px 0"},children:e.jsx("span",{style:{fontFamily:"Woolsocks, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",fontSize:14,color:"#100B1C",opacity:.5,letterSpacing:"0.15px"},children:c("popup.noDealsForSite")})})}),e.jsx("div",{style:{textAlign:"center",padding:"15px 0"},children:e.jsx("img",{src:chrome.runtime.getURL("public/icons/Woolsocks-logo-large.png"),alt:"Woolsocks",style:{height:33,width:140}})})]})]})}const z=W.createRoot(document.getElementById("root"));z.render(e.jsx(T,{}));
